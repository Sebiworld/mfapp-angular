<ion-card [ngStyle]="styles()">
  <ion-card-header class="bg-medium">
    <div class="title-wrapper">
      <ion-card-subtitle *ngIf="eventDates()?.length >= 1">
        {{ eventDates()[0] | date: 'fullDate' : undefined : locale }}
        <ng-container *ngIf="eventDates()?.length >= 2">
          - {{ eventDates()[eventDates()?.length - 1] | date: 'fullDate' : undefined : locale }}
        </ng-container>
      </ion-card-subtitle>
      <ion-card-title *ngIf="_event().title">{{ _event().title }}</ion-card-title>
    </div>

    <div class="actions">
      <ion-button *ngIf="_event().saveable" size="small" color="medium" [routerLink]="['/calendar', _event().id]"
        [title]="'calendar.event.edit' | translate: {fallback: 'Termin bearbeiten'}"
        [attr.aria-label]="'calendar.event.edit' | translate: {fallback: 'Termin bearbeiten'}">
        <ion-icon slot="icon-only" name="create"></ion-icon>
      </ion-button>

      <ion-button *ngIf="_event().deletable" size="small" color="medium"
        [title]="'calendar.event.delete' | translate: {fallback: 'Termin löschen'}"
        [attr.aria-label]="'calendar.event.delete' | translate: {fallback: 'Termin löschen'}" (click)="delete()">
        <ion-icon slot="icon-only" name="close"></ion-icon>
      </ion-button>
    </div>
  </ion-card-header>

  <ion-card-content>
    <div class="description rich-content" *ngIf="_event().description" [innerHTML]="_event().description">
    </div>

    <div class="timespans-wrapper">
      <div *ngFor="let group of timespanGroups(); trackBy: trackTimespanGroup;" class="group-container">
        <div class="group-header" *ngIf="timespanGroups()?.length >= 2">
          {{ group.date | date: 'longDate' : undefined : locale }}
        </div>
        <div class="timespans-wrapper">
          <div class="timespan header">
            <div class="time">
              {{ 'calendar.event.timespan.time' | translate }}
            </div>
            <div class="info">
              {{ 'calendar.event.timespan.description' | translate }}
            </div>
            <div class="participants">
              {{ 'calendar.event.timespan.participants' | translate }}
            </div>
          </div>

          <div *ngFor="let timespan of group.timespans; let index = index; trackBy: trackTimespan;" class="timespan" [class.even]="index % 2 === 1" [class.odd]="index % 2 !== 1">
            <div class="time">
              {{ timespan.timeFrom | date: 'shortTime' : undefined : locale }}&shy; - {{ timespan.timeUntil | date:
              'shortTime' : undefined : locale
              }}
            </div>
            <div class="info">
              <h3 *ngIf="timespan.title" class="title">{{ timespan.title }}</h3>
              <div class="description rich-content" [innerHTML]="timespan.description"></div>
            </div>
            <div class="participants">
              <div class="rich-content" [innerHTML]="timespan.participants"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ion-card-content>
</ion-card>